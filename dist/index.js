!function(){function t({state:t,event:e}){return{username:"input"===e.type&&"username"===e.target.id?e.target.value:t.username,password:"input"===e.type&&"password"===e.target.id?e.target.value:t.password,loading:"submit"===e.type&&"loginForm"===e.target.id||(!t.loading||"fetchResult"!==e.type)&&t.loading,requesting:"submit"===e.type&&"loginForm"===e.target.id,loginState:"fetchResult"===e.type?e.data?"success":"failed":t.loginState}}function e(t,n){if(t.nodeName!==n.nodeName)t.parentNode.replaceChild(n,t);else if(t.nodeType===Node.TEXT_NODE)t.textContent!==n.textContent&&(t.textContent=n.textContent);else{for(const{name:e,value:o}of n.attributes)t.getAttribute(e)!==o&&t.setAttribute(e,o);for(const{name:e}of[...t.attributes])n.hasAttribute(e)||t.removeAttribute(e);const o=[...t.childNodes],r=[...n.childNodes];if(o.length<r.length)for(let e=o.length;e<r.length;e++)t.appendChild(r[e]);if(o.length>r.length)for(let e=r.length;e<o.length;e++)t.removeChild(o[e]);const i=Math.min(o.length,r.length);for(let t=0;t<i;t++)e(o[t],r[t])}}function n(t){const n=document.createElement("body");n.innerHTML=t,e(document.body,n)}function o(...t){return e=>t.reduce(((t,e)=>e(t)),e)}const r=o((function(e){return void 0===e.state||"click"===event.type&&"reset"===event.target.id?{...e,state:{username:"",password:"",loading:!1,requesting:!1,loginState:"idle"}}:{...e,state:t(e)}}),(function(t){const{state:{requesting:e,username:n,password:o}}=t;return{...t,fetch:e?{url:"login.php",data:{username:n,password:o}}:null}}),(function(t){return{...t,event:{types:["click","input","submit","fetchResult"],preventDefault:t=>"submit"===t.type}}}),(function(t){const{state:{loginState:e,loading:n,username:o,password:r}}=t;return{...t,html:"idle"===e?`\n\t\t\t\t<form id="loginForm">\n\t\t\t\t\tUsername: <input id="username"${n?" disabled":""} value="${o}"><br>\n\t\t\t\t\tPassword: <input id="password" type="password"${n?" disabled":""} value="${r}"><br>\n\t\t\t\t\t<button${n?" disabled":""}>Login</button>\n\t\t\t\t</form>\n\t\t\t`:"success"===e?'\n\t\t\t\t\tLogin success!<br>\n\t\t\t\t\t<button id="reset">Reset</button>\n\t\t\t\t':'\n\t\t\t\t\tLogin failed!<br>\n\t\t\t\t\t<button id="reset">Reset</button>\n\t\t\t\t'}}));o((function(t){let e=!0;return function(o){const r=t(o);return null!==r.html&&(e?(document.body?n(r.html):addEventListener("DOMContentLoaded",(function(){n(r.html)})),e=!1):n(r.html)),r}}),(function(t){return function(e){const n=t(e);return null!==n.fetch&&fetch(n.fetch.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.entries(n.fetch.data).map((function([t,e]){return`${t}=${encodeURI(e)}`})).join("&")}).then((function(t){return t.json()})).then((function(t){dispatchEvent(Object.assign(new Event("fetchResult"),{data:t}))})),n}}),(function(t){let e;return function(n){void 0===e&&(e=n.state);const o=t({...n,state:e});return e=o.state,o}}),(function(t){let e=!0;return function(n){const o=t({...n,event:new Event("null")});if(e){for(const e of o.event.types)addEventListener(e,(function(e){o.event.preventDefault(e)&&e.preventDefault(),t({...n,event:e})}));e=!1}return o}}))(r)({})}();